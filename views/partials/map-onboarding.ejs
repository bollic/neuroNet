<!-- ===============================
  PARTIAL: map-onboarding.ejs
  Ruolo: ANONIMO (onboarding)
================================== -->

  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!-- DaisyUI -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css" rel="stylesheet" type="text/css" />

  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
        crossorigin="anonymous" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

  <!-- Leaflet.draw -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
      
    <!-- jQuery (necessario per DataTables) -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"
            integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
            crossorigin="anonymous"></script>

    <!-- DataTables -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<div class="flex justify-center py-6">
  <div class="flex flex-col w-full max-w-xs space-y-4">
    
    <!-- HEADER piccolo -->
    <div class="bg-purple-700 text-white py-2 px-3 rounded-t-lg text-center shadow-md">
      <h1 class="text-lg font-bold flex items-center justify-center gap-2">
        <i class="fas fa-map-marked-alt"></i>
        DÃ©couverte de la carte
      </h1>
    </div>

    <!-- MAPPA cameo -->
    <div id="map" class="rounded-xl shadow-md"
         style="width: 100%; height: 300px; border: 1px solid #e5e7eb; overflow: hidden;">
    </div>

    <!-- FOOTER / AZIONI -->
    <div class="bg-white shadow-inner py-2 px-3 flex flex-col items-center text-center rounded-b-lg">
      <span class="text-gray-600 text-sm mb-2">
        ğŸ—ºï¸ Cliquez sur la carte pour ajouter vos 3 premiers points et devenir membre. Vos points seront sauvegardÃ©s dÃ¨s votre inscription.
      </span>
      <form id="becomeMemberForm" action="/onboarding/convert" method="POST">
        <button type="submit" class="btn btn-sm btn-primary" disabled id="becomeMemberBtn">
          ğŸš€ Devenir membre
        </button>
      </form>
    </div>

  </div>
</div>

<script>
  var points = <%- JSON.stringify(points || []) %>;
  var categories = <%- JSON.stringify(categories || []) %>;
  console.log("ğŸ§ª categorie anon:", categories);
  console.log("ğŸ” points anon:", points);
</script>

<script src="/js/dataAuthorGeoAnon.js" defer></script>
